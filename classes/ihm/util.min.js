if(!window.Element){Element=new Object()}Element.getLeft=function(a){var b=0;while(a!=null){b+=a.offsetLeft;a=a.offsetParent}return b};Element.getTop=function(a){var b=0;while(a!=null){b+=a.offsetTop;a=a.offsetParent}return b};Element.setStyle=function(a,b){for(directive in b){a.style[directive]=b[directive]}};Element.getChildElements=function(e,d){var a=new Array();var b=d.toLowerCase();for(var c=0;c<e.childNodes.length;c++){var f=e.childNodes[c];if(f.nodeType==1){if(b=="*"||f.nodeName.toLowerCase()==b){a.push(f)}}}return a};Element.cleanWhiteSpace=function(b){for(var a=0;a<b.childNodes.length;a++){var c=b.childNodes[a];if(c.nodeType==3&&!/\S/.test(c.nodeValue)){b.removeChild(c)}}};if(!window.Event){Event=new Object()}Event.event=function(a){return(a||window.event)};Event.target=function(a){return(a)?a.target:window.event.srcElement};Event.preventDefault=function(a){var a=a||window.event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};Event.stopPropagation=function(a){var a=a||window.event;if(a.stopPropagation){a.stopPropagation()}else{a.cancelBubble=true}};Keys={TAB:9,ENTER:13,ESCAPE:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40};Log={error:function(a){alert("Error : \n"+a)}};function LoadData(a,c,b){this.idSources=a;this.url=c;this.action=b;this.setBehaviour();this.request=this.getRequest()}LoadData.prototype={setBehaviour:function(){for(i=0;i<this.idSources.length;i++){switch(this.action){case"onchange":var a=this;document.getElementById(this.idSources[i]).onchange=function(){a.load()};break;case"onkeyup":var a=this;document.getElementById(this.idSources[i]).onkeyup=function(b){a.onkeyup(b)};break;case"onclick":var a=this;document.getElementById(this.idSources[i]).onclick=function(b){a.onclick(b)};break;default:break}}},getRequest:function(){var a=this.request;if(a==null){if(window.XMLHttpRequest){a=new XMLHttpRequest()}else{if(window.ActiveXObject){a=new ActiveXObject("Microsoft.XMLHTTP")}}}return a},load:function(){if(this.resquest!=null){try{this.request.abort();document.getElementById("content-wrap").style.cursor="default"}catch(a){}}this.request=this.getRequest();if(this.request!=null){var b="";for(i=0;i<this.idSources.length;i++){var d=document.getElementById(this.idSources[i]).value;b+="&"+this.idSources[i]+"="+encodeURIComponent(d)}try{this.request.open("POST",this.url,true);this.request.setRequestHeader("Content-type","application/x-www-form-urlencoded");var c=this;this.request.onreadystatechange=function(){try{if(c.request.readyState==4&&c.request.status==200){document.getElementById("data").innerHTML=c.request.responseText;document.getElementById("content-wrap").style.cursor="default"}}catch(e){document.getElementById("content-wrap").style.cursor="default";Log.error(e)}};this.request.send(b);document.getElementById("content-wrap").style.cursor="progress"}catch(a){Log.error(a)}}},onkeyup:function(a){switch(Event.event(a).keyCode){case Keys.DOWN:case Keys.UP:case Keys.PAGE_UP:case Keys.HOME:case Keys.PAGE_DOWN:case Keys.END:case Keys.ENTER:case Keys.ESCAPE:break;default:this.load()}}};LoadData.prototype.constructor=LoadData;